<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GEMP Card Analytics</title>
    <style>
        :root {
            --bg-dark: #1a1a2e;
            --bg-card: #16213e;
            --accent: #e94560;
            --accent-dim: #a83249;
            --text: #eee;
            --text-dim: #999;
            --positive: #4ade80;
            --negative: #f87171;
            --warning: #fbbf24;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--bg-dark);
            color: var(--text);
            min-height: 100vh;
            padding: 20px;
            font-size: 16px;
            line-height: 1.6;
        }
        
        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            max-width: 1200px;
            margin-left: auto;
            margin-right: auto;
        }
        
        h1 {
            color: var(--accent);
            font-size: 2rem;
        }
        
        nav.header-links a {
            color: var(--text-dim);
            text-decoration: none;
            margin-left: 20px;
            font-size: 1rem;
        }
        
        nav.header-links a:hover {
            color: var(--accent);
        }
        
        .content {
            max-width: 900px;
            margin: 0 auto;
        }
        
        .card {
            background: var(--bg-card);
            padding: 25px 30px;
            border-radius: 8px;
            margin-bottom: 25px;
        }
        
        .card h2 {
            color: var(--accent);
            margin-bottom: 15px;
            font-size: 1.4rem;
        }
        
        .card h3 {
            color: var(--text);
            margin: 20px 0 10px 0;
            font-size: 1.1rem;
        }
        
        .card p {
            margin-bottom: 15px;
            color: var(--text);
        }
        
        .card ul {
            margin-left: 25px;
            margin-bottom: 15px;
        }
        
        .card li {
            margin-bottom: 8px;
        }
        
        .quick-links {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .quick-link {
            background: var(--bg-card);
            padding: 25px;
            border-radius: 8px;
            text-decoration: none;
            color: var(--text);
            transition: transform 0.2s, border-color 0.2s;
            border: 2px solid transparent;
        }
        
        .quick-link:hover {
            transform: translateY(-2px);
            border-color: var(--accent);
        }
        
        .quick-link h3 {
            color: var(--accent);
            margin-bottom: 10px;
            font-size: 1.2rem;
        }
        
        .quick-link p {
            color: var(--text-dim);
            font-size: 0.95rem;
        }
        
        .warning-box {
            background: rgba(251, 191, 36, 0.1);
            border-left: 4px solid var(--warning);
            padding: 15px 20px;
            margin: 15px 0;
            border-radius: 0 8px 8px 0;
        }
        
        .warning-box strong {
            color: var(--warning);
        }
        
        .info-box {
            background: rgba(74, 222, 128, 0.1);
            border-left: 4px solid var(--positive);
            padding: 15px 20px;
            margin: 15px 0;
            border-radius: 0 8px 8px 0;
        }
        
        code {
            background: var(--bg-dark);
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 0.9em;
        }
        
        .stat-explanation {
            display: grid;
            grid-template-columns: 150px 1fr;
            gap: 10px 20px;
            margin: 15px 0;
        }
        
        .stat-explanation dt {
            color: var(--accent);
            font-weight: 600;
        }
        
        .stat-explanation dd {
            color: var(--text-dim);
        }
        
        .color-sample {
            display: inline-block;
            width: 14px;
            height: 14px;
            border-radius: 3px;
            vertical-align: middle;
            margin-right: 5px;
        }
        
        .color-green { background: var(--positive); }
        .color-yellow { background: var(--warning); }
        .color-red { background: var(--negative); }
        
        footer {
            text-align: center;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid var(--bg-card);
            color: var(--text-dim);
            font-size: 0.9rem;
        }
        
        footer a {
            color: var(--accent);
            text-decoration: none;
        }
    </style>
</head>
<body>
    <header>
        <h1>GEMP Card Analytics</h1>
        <nav class="header-links">
            <a href="/query.html">Query Tool</a>
            <a href="/archetypes.html">Archetypes</a>
            <a href="/admin.html">Admin</a>
            <a href="/docs">API Docs</a>
        </nav>
    </header>
    
    <div class="content">
        <div class="quick-links">
            <a href="/query.html" class="quick-link">
                <h3>üìä Card Statistics</h3>
                <p>Query win rates, play rates, and trends across formats and time periods.</p>
            </a>
            <a href="/archetypes.html" class="quick-link">
                <h3>üé¥ Archetype Explorer</h3>
                <p>Discover detected deck archetypes and the cards that define them.</p>
            </a>
            <a href="/admin.html" class="quick-link">
                <h3>‚öôÔ∏è Admin Panel</h3>
                <p>Manage data ingestion, patches, and system settings.</p>
            </a>
        </div>
        
        <div class="card">
            <h2>Understanding the Statistics</h2>
            
            <dl class="stat-explanation">
                <dt>Games</dt>
                <dd>Number of games where this card appeared in at least one player's deck.</dd>
                
                <dt>Inclusion WR</dt>
                <dd>Win rate when the card is in your deck, whether played or not.</dd>
                
                <dt>Players</dt>
                <dd>Unique players who included this card (helps identify "pet decks" vs meta trends).</dd>
                
                <dt>Played</dt>
                <dd>Number of times this card was actually played from hand (not just sitting in deck).</dd>
                
                <dt>Play WR</dt>
                <dd>Win rate specifically when this card was played. Most meaningful for events/conditions.</dd>
                
                <dt>Priority</dt>
                <dd>Games √ó (WinRate - 0.5). Combines popularity with impact‚Äîhigh priority cards are both common and influential.</dd>
            </dl>
            
            <h3>Win Rate Color Coding</h3>
            <p>
                <span class="color-sample color-green"></span><strong>Green (47-53%):</strong> Balanced‚Äîclose to the expected 50% baseline.<br>
                <span class="color-sample color-yellow"></span><strong>Yellow (40-46% or 54-60%):</strong> Slightly skewed‚Äîworth watching.<br>
                <span class="color-sample color-red"></span><strong>Red (&lt;40% or &gt;60%):</strong> Significantly imbalanced‚Äîmay indicate design issues.
            </p>
        </div>
        
        <div class="card">
            <h2>Known Data Issues</h2>
            
            <div class="warning-box">
                <strong>‚ö†Ô∏è Attached Zone Bug</strong>
                <p style="margin-top: 8px; margin-bottom: 0;">
                    Cards that remain attached at game end (weapons, armor, conditions on characters) are incorrectly 
                    recorded as "not played" even though they were played earlier in the game. This primarily affects 
                    <strong>Play WR</strong> for possessions and conditions‚Äîthe Inclusion WR remains accurate.
                </p>
            </div>
            
            <p>
                This bug causes equipment-heavy strategies to appear less played than they actually are. 
                We're working on a fix, but in the meantime, treat Play WR for attachments with skepticism 
                and rely more on Inclusion WR for those card types.
            </p>
            
            <h3>Other Considerations</h3>
            <ul>
                <li><strong>Bot games are excluded</strong> ‚Äî Games against AI opponents don't contribute to statistics.</li>
                <li><strong>Sample size matters</strong> ‚Äî Cards with fewer than 50-100 games may have unreliable statistics.</li>
                <li><strong>Meta context</strong> ‚Äî A card's win rate depends on what it's being played against. A "bad" card might just be poorly positioned in the current meta.</li>
                <li><strong>Correlation ‚â† Causation</strong> ‚Äî High win rate doesn't mean the card is causing wins. Strong players might favor certain cards.</li>
            </ul>
        </div>
        
        <div class="card">
            <h2>Tips for Analysis</h2>
            
            <div class="info-box">
                <strong>üí° Pro Tip:</strong> When analyzing a specific card, check both Inclusion WR and Play WR. 
                If Inclusion WR is high but Play WR is low, the card might be good to have in deck but situational to play.
                If both are high, it's consistently impactful.
            </div>
            
            <ul>
                <li><strong>Use the Players column</strong> to distinguish meta staples from one player's pet tech. A card with 1000 games but only 3 players is one person's grind.</li>
                <li><strong>Filter by competitive tier</strong> to see how cards perform at different skill levels. Tournament data may differ significantly from casual play.</li>
                <li><strong>Compare formats</strong> to understand how the card pool affects individual card performance.</li>
                <li><strong>Use date filters</strong> to track how cards perform after balance patches.</li>
                <li><strong>Share your queries</strong> ‚Äî Use the Share button to copy a link with your current filters for discussion.</li>
            </ul>
        </div>
        
        <div class="card">
            <h2>About This Tool</h2>
            <p>
                GEMP Card Analytics processes game replay data to provide win rate statistics for the 
                Lord of the Rings Trading Card Game. Data is aggregated daily and includes games from 
                all tracked formats.
            </p>
            <p>
                The archetype detection uses graph clustering algorithms to identify cards that 
                frequently appear together, helping map the deck-building landscape without manual curation.
            </p>
            <p>
                Questions or feedback? Visit the <a href="https://github.com/PlayersCouncil/gemp-lotr" target="_blank">GEMP GitHub</a> 
                or join the community Discord.
            </p>
        </div>
    </div>
    
    <footer>
        <p>GEMP Card Analytics ‚Ä¢ Data updates daily ‚Ä¢ <a href="/docs">API Documentation</a></p>
    </footer>
</body>
</html>
